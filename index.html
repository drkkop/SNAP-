<!DOCTYPE html>
<html lang="fr" translate="no">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="theme-color" content="#ffffff">
<title>Snap+ — activation</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;900&display=swap" rel="stylesheet" />

<style>
:root{
  /* palette claire alignée avec pages 2/3 */
  --ink:#0f1420; --text:#0f1420;
  --mut:#5b6474; --mut2:#8a93a6;
  --rose:#ff4fa6; --pink:#ff3d86; --fuchsia:#d61e7a;
  --stroke:#e6e8f0; --panel:#ffffff;
  --radius:22px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:linear-gradient(180deg,#f7f9ff,#eef2ff);
  display:grid;place-items:center;min-height:100svh;padding:20px;overflow-x:hidden;overscroll-behavior:contain;
}

/* supprime l'ancien fond sombre */
.bg,.grid{display:none}

/* Carte claire */
.card{
  width:min(92vw,440px);
  border-radius:var(--radius);padding:26px 22px 18px;position:relative;
  background:var(--panel);
  border:1px solid var(--stroke);
  box-shadow:0 14px 40px rgba(15,20,32,.06);
}
.stack{display:grid;gap:14px;place-items:center;text-align:center}

/* Logo carré */
.logoWrap{width:108px;height:108px;filter:drop-shadow(0 4px 14px rgba(0,0,0,.05))}
.logoWrap img{width:100%;height:100%;display:block}

h1{margin:0;font-size:clamp(24px,5vw,30px);font-weight:900;line-height:1.08;color:var(--ink)}

form{width:100%;display:grid;gap:12px;margin-top:2px}
.field{position:relative}
.field svg.icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:20px;height:20px;color:#475569;opacity:.95}
input{
  width:100%;height:52px;padding:14px 44px;border-radius:14px;border:1px solid var(--stroke);
  background:#f4f7ff;color:var(--ink);font-size:16px;outline:none;
  transition:border-color .15s,box-shadow .15s,background .15s;caret-color:#2b6fff;text-transform:lowercase;
}
input::placeholder{color:#8a93a6}
input:focus{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa33;background:#fff}

.helper{font-size:12px;color:var(--mut);text-align:left;margin-top:2px}
.msg{min-height:18px;font-size:13px;text-align:left;margin:0}
.msg.error{color:#dc2626;font-weight:800;display:none}
.msg.ok{color:#16a34a;display:none}

.cta{
  position:relative;display:block;border:0;width:100%;height:52px;border-radius:14px;
  font-weight:900;font-size:16px;color:#1f2937;background:linear-gradient(180deg,#e5e7eb,#cfd4dc);
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.05), 0 8px 18px rgba(0,0,0,.10);
  cursor:not-allowed
}
.cta.enabled{cursor:pointer;color:#111;background:linear-gradient(180deg,var(--rose),var(--pink) 55%,var(--fuchsia));
  box-shadow:0 12px 28px rgba(255,77,166,.24)}
.cta.enabled:active{transform:scale(.99)}
:focus-visible{outline:2px solid #60a5fa;outline-offset:3px}

/* Mentions */
.legal{margin-top:8px;color:#6b7280;font-size:12px;text-align:center}
.legal a{color:#4b5563;text-decoration:none;border-bottom:1px dotted #c9cfdd}
.legal a:hover{color:#111827}
.disclaimer{margin-top:4px;color:#8a93a6;font-size:11px;text-align:center}
</style>
</head>
<body>
  <div class="bg"></div>
  <div class="grid"></div>

  <main class="card" role="main" aria-labelledby="title">
    <section class="stack">
      <div class="logoWrap">
        <img src="/assets/logo-snap.png" alt="Snap+" width="108" height="108" loading="eager" decoding="async">
      </div>

      <h1 id="title">Snap+ en un clic</h1>

      <form id="form" novalidate autocomplete="off">
        <div class="field">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 12a5 5 0 1 0-5-5 5.006 5.006 0 0 0 5 5Zm0 2c-4.006 0-8 2.006-8 5v1a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1c0-2.994-3.994-5-8-5Z"/></svg>
          <input id="username" name="username" inputmode="text" enterkeyhint="next"
                 spellcheck="false" autocapitalize="none" autocorrect="off"
                 placeholder="Entrez votre pseudo" minlength="5" maxlength="30"
                 pattern="[a-z0-9._-]{5,30}" required aria-invalid="false" />
        </div>

        <div id="helper" class="helper">5–30 caractères : a–z, 0–9, . _ et -</div>
        <p id="msgError" class="msg error" role="alert" aria-live="polite"></p>
        <p id="msgOk" class="msg ok" aria-live="polite">OK ✅</p>

        <button class="cta" type="submit" id="cta" aria-disabled="true">
          <span class="label">Continuer</span>
        </button>
      </form>

      <div class="legal">
        <a href="mentions.html">Mentions</a> ·
        <a href="confidentialite.html">Confidentialité</a> ·
        <a href="faq.html">FAQ</a>
        <div class="disclaimer">© 2025 Snap+ Services — France · Non affilié à Snapchat.</div>
      </div>
    </section>
  </main>

<script>
const form = document.getElementById('form');
const input = document.getElementById('username');
const msgError = document.getElementById('msgError');
const msgOk = document.getElementById('msgOk');
const cta = document.getElementById('cta');

const BASE = /^[a-z0-9._-]{5,30}$/;
const HAS_LETTER = /[a-z]/;
let touched = false;

function sanitize(v){ return v.toLowerCase().replace(/[^a-z0-9._-]/g,''); }
function reason(v){
  if (v.length === 0) return "";
  if (v.length < 5) return "Au moins 5 caractères.";
  if (/[^a-z0-9._-]/.test(v)) return "Caractères autorisés : a–z, 0–9, . _ -";
  if (!HAS_LETTER.test(v)) return "Inclure au moins une lettre.";
  if (v.length > 30) return "Maximum 30 caractères.";
  return "";
}

function sync(){
  const raw = input.value;
  const v = sanitize(raw);
  if (v !== raw) input.value = v;

  const r = reason(v);
  const valid = BASE.test(v);

  cta.classList.toggle('enabled', valid);
  cta.setAttribute('aria-disabled', valid ? 'false' : 'true');
  input.setAttribute('aria-invalid', valid ? 'false' : 'true');

  if (touched && r){
    msgError.style.display = 'block';
    msgError.textContent = r;
    msgOk.style.display = 'none';
  } else if (valid){
    msgError.style.display = 'none';
    msgOk.style.display = 'block';
  } else {
    msgError.style.display = 'none';
    msgOk.style.display = 'none';
  }
}

input.addEventListener('input', ()=>{ touched = true; sync(); });
input.addEventListener('blur', ()=>{ touched = true; sync(); });

form.addEventListener('submit', e=>{
  e.preventDefault();
  touched = true; sync();
  if(cta.classList.contains('enabled')){
    try{ localStorage.setItem('snap_username', input.value.trim()); }catch(_){}
    window.location.href = 'page2.html?u=' + encodeURIComponent(input.value.trim());
  }
});

sync();
</script>
</body>
</html>
